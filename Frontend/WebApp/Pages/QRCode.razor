<MudDialog>
    <TitleContent>
        Scanner
    </TitleContent>
    <DialogContent>
        <MudPaper id="qrCodeResult"></MudPaper>
        <MudText Typo="Typo.h6">Scan QR Code...</MudText>
        <MudContainer style="display: flex; justify-content:center;">
            <MudPaper id="qrCodeReader" style="width: 500px; max-width: 90%;" />
        </MudContainer>
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Primary" OnClick="Close">Ok</MudButton>
    </DialogActions>
</MudDialog>

<script>
    function domReady(fn) {
        if (document.readyState === "complete" || document.readyState === "interactive") {
            setTimeout(fn, 1);
        } else {
            document.addEventListener("DOMContentLoaded", fn);
        }
    }

    domReady(function () {
        var qrCode = document.getElementById('qrCodeResult');
        var lastResult, countResults = 0;

        function onScanSuccess(decodeText, decodeResult) {
            if (decodeText !== lastResult) {
                ++countResults;
                lastResult = decodeText;
                qrCode.innerHTML = decodeText;  // QR-Code-Text anzeigen
            }
        }

        var htmlScanner = new Html5QrcodeScanner("qrCodeReader", { fps: 10, qrbox: 250 });
        htmlScanner.render(onScanSuccess);
    });
</script>

@code {
    [CascadingParameter]
    private MudDialogInstance MudDialog { get; set; }

    private void Close() => MudDialog.Close(DialogResult.Ok(true));
}